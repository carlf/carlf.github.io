<!doctype html><html lang=en-us>
<head>
<title>Colophon (Part 2) // carlf.io</title>
<link rel="shortcut icon" href=/favicon.ico>
<meta charset=utf-8>
<meta name=generator content="Hugo 0.88.1">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content="Carl Flippin">
<meta name=description content>
<link rel=stylesheet href=https://carlf.io/css/main.min.b52e52a984e06b7678dd28ad6f501e94f3d73c526a5bdad3362df17c7ab83d9a.css>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Colophon (Part 2)">
<meta name=twitter:description content="This is part 2 of the colophon for this site. For part 1 see here. This continuation will cover how to use ox-hugo to manage your content and publish it from org-mode files.
ox-hugo For generation of the markdown used in Hugo, we use ox-hugo. This module allows you to write your blog posts in regular old org but to export them as markdown suitable for Hugo&rsquo;s blackfriday markdown parser. It allows us to operate on org, which we are all comfortable with, but still take advantage of the conventiences of Hugo.">
<meta property="og:title" content="Colophon (Part 2)">
<meta property="og:description" content="This is part 2 of the colophon for this site. For part 1 see here. This continuation will cover how to use ox-hugo to manage your content and publish it from org-mode files.
ox-hugo For generation of the markdown used in Hugo, we use ox-hugo. This module allows you to write your blog posts in regular old org but to export them as markdown suitable for Hugo&rsquo;s blackfriday markdown parser. It allows us to operate on org, which we are all comfortable with, but still take advantage of the conventiences of Hugo.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://carlf.io/posts/colophon_part_2/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-09-07T00:00:00+00:00">
<meta property="article:modified_time" content="2021-09-07T00:00:00+00:00">
</head>
<body>
<header class=app-header>
<a href=https://carlf.io><img class=app-header-avatar src=/avatar.png alt="Carl Flippin"></a>
<h1>carlf.io</h1>
<nav class=app-header-menu>
<a class=app-header-menu-item href=/>Home</a>
-
<a class=app-header-menu-item href=/categories>Categories</a>
</nav>
<p>I'm just as confused as the rest of you</p>
<div class=app-header-social>
<a href=https://github.com/carlf target=_blank rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>My Github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a>
<a href=https://keyoxide.org/50f1a8d452b5c094a656ce6aac084c5eec19856d target=_blank rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-key"><title>My GPG Key</title><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5.0 11-7.778 7.778 5.5 5.5.0 017.777-7.777zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3m-3.5 3.5L19 4"/></svg>
</a>
<a href=https://carlf.io/index.xml target=_blank rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-rss"><title>RSS</title><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg>
</a>
</div>
</header>
<main class=app-container>
<article class=post>
<header class=post-header>
<h1 class=post-title>Colophon (Part 2)</h1>
<div class=post-meta>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Sep 7, 2021
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
4 min read
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a class=tag href=https://carlf.io/tags/hugo/>hugo</a>
<a class=tag href=https://carlf.io/tags/org/>org</a>
<a class=tag href=https://carlf.io/tags/meta/>meta</a>
</div>
</div>
</header>
<div class=post-content>
<p>This is part 2 of the colophon for this site. For part 1 see <a href=/posts/colophon_part_1/>here</a>. This
continuation will cover how to use ox-hugo to manage your content and publish it
from org-mode files.</p>
<h2 id=ox-hugo>ox-hugo</h2>
<p>For generation of the markdown used in Hugo, we use
<a href=https://ox-hugo.scripter.co/>ox-hugo</a>. This module allows you to write your
blog posts in regular old org but to export them as markdown suitable for Hugo&rsquo;s
blackfriday markdown parser. It allows us to operate on org, which we are all
comfortable with, but still take advantage of the conventiences of Hugo.</p>
<h3 id=installation>Installation</h3>
<p>I am using <a href=https://github.com/hlissner/doom-emacs>doom emacs</a> so enabling
ox-hugo was as simple as:</p>
<div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=color:#eceff4>(</span>doom! <span style=color:#81a1c1>:lang</span>
       <span style=color:#eceff4>(</span>org +hugo<span style=color:#eceff4>))</span></code></pre></div>
<p>If you are rolling your own emacs, it is available
<a href=https://melpa.org/#/ox-hugo>here</a> on MELPA as a package. If you are using the
popular <a href=https://github.com/jwiegley/use-package>use-package</a> macro, you could
do the following:</p>
<div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=color:#eceff4>(</span><span style=color:#81a1c1>use-package</span> ox-hugo
  <span style=color:#81a1c1>:ensure</span> <span style=color:#8fbcbb>t</span>
  <span style=color:#81a1c1>:after</span> ox<span style=color:#eceff4>)</span></code></pre></div>
<h3 id=structure-your-posts>Structure your posts</h3>
<p>Posts are held in a monolithic org document that gets exported to individial
markdown files for Hugo to process. There are some handy properties you can set
to make things come out nice and neat and we&rsquo;ll go over them now.</p>
<h4 id=global-settings>Global Settings</h4>
<p>First let&rsquo;s look at the preamble for the whole file.</p>
<div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-org data-lang=org><span style=color:#616e87;font-style:italic>#+HUGO_BASE_DIR</span><span style=color:#616e87;font-style:italic>: ~/repos/carlf.github.io</span>
<span style=color:#616e87;font-style:italic>#+HUGO_SECTION</span><span style=color:#616e87;font-style:italic>: posts</span>
<span style=color:#616e87;font-style:italic>#+HUGO_CODE_FENCE</span><span style=color:#616e87;font-style:italic>: nil</span></code></pre></div>
<p>Here we set some global options for the whole file. The <code>HUGO_BASE_DIR</code> setting
should be set to the root of your hugo repo. This is where all the markdown will
end up. The <code>HUGO_SECTION</code> should match the subdirectory that your posts would
end up in. For most hugo installations this should just be <code>posts</code>. If you have
done something tricky with your taxonomy, feel free to change that.</p>
<p>The <code>HUGO_CODE_FENCE</code> set to <code>nil</code> will make ox-hugo use the highlight
shortcode. If set to <code>t</code> ox-hugo will use the triple-backtick code fence.
Looking at the generated HTML, they seem to have the same effect but it worked
first when I had it set to <code>nil</code> so it has stayed <code>nil</code> for me. Note that both
of these modes use <a href=https://github.com/alecthomas/chroma>Chroma</a> for their highlighting which supports most common
languages and has a ton of <a href=https://xyproto.github.io/splash/docs/>themes</a> available.</p>
<h4 id=per-post-settings>Per-post Settings</h4>
<p>Each post also has a number of settings. Let&rsquo;s look at the start of a post.</p>
<div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-org data-lang=org><span style=color:#88c0d0;font-weight:700>**</span> Colophon (Part 1)<span style=font-style:italic> :meta:hugo:</span>
<span style=color:#616e87;font-style:italic>:PROPERTIES:
</span><span style=color:#616e87;font-style:italic></span><span style=color:#616e87;font-style:italic>:EXPORT_FILE_NAME: colophon_part_1
</span><span style=color:#616e87;font-style:italic>:EXPORT_DATE: 2021-09-06
</span><span style=color:#616e87;font-style:italic>:ID:       a35b08a0-d4a5-4b60-967d-dbfcf68490ea
</span><span style=color:#616e87;font-style:italic></span><span style=color:#616e87;font-style:italic>:END:</span></code></pre></div>
<p>Note here that <code>EXPORT_FILE_NAME</code> is the name for the markdown file ox-hugo will
generate. If you do not have an <code>EXPORT_FILE_NAME</code>, the file will not be
exported.</p>
<p>The <code>EXPORT_DATE</code> will be used for the published date in hugo. The <code>EXPORT_DATE</code>
field is not strictly necessary. If you make your top-level headings TODO items,
the timestamp for <code>CLOSED</code> will be used for the published data. If the heading
is in a TODO status, it will be exported as a draft. If it is in a DONE state,
it will be exported with draft set to false.</p>
<p>The <code>ID</code> property is handy if you ever need to link between pages. The link to
the first part of this series was created by a link to the id of that heading.
The tags for the post are the tags on the top-level heading for that post. In
this case we have the <code>meta</code> and <code>hugo</code> tags. Those will easily populate your
taxonomy. Also note that the category at the top of the tree will be inherited
by all posts below it.</p>
<h3 id=exporting>Exporting</h3>
<p>Now that we have our posts in a nice neat bundle or org, we need to export them
so Hugo can process them and generate HTML. With standard keybindings, this is
as simple as <code>C-c C-e H A</code>. This will take all of our posts in the current file
and export them as individual markdown files ready for processing by hugo. Once
this is done, fire up hugo with <code>hugo serve</code> and take a look at <a href=http://localhost:1313>localhost:1313</a>
to witness the fruits of your labors.</p>
</div>
<div class=post-footer>
</div>
</article>
</main>
</body>
</html>